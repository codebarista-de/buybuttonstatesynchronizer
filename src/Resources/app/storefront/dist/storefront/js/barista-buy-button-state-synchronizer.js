"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["barista-buy-button-state-synchronizer"],{6844:(t,n,e)=>{var i,o,s,u=e(6285);class r extends u.Z{static disableBuyButton(t,n=null,e=null){const i=document.getElementsByClassName("btn-buy").item(0);null!=i?(i.setAttribute(`${t}-buy-button-disabled`,""),null!=e&&(window.buyButtonStateSynchronizerActions||(window.buyButtonStateSynchronizerActions={}),window.buyButtonStateSynchronizerActions[t]={label:n,callback:e})):console.warn("Cannot disable buy button: No element with class btn-buy")}static enableBuyButton(t){const n=document.getElementsByClassName("btn-buy").item(0);null!=n?(n.removeAttribute(`${t}-buy-button-disabled`),window.buyButtonStateSynchronizerActions&&delete window.buyButtonStateSynchronizerActions[t]):console.warn("Cannot enable buy button: No element with class btn-buy")}init(){window.buyButtonStateSynchronizerActions||(window.buyButtonStateSynchronizerActions={}),this.isDisabled=this.isBuyButtonDisabled(),this.buyButtonObserver=new MutationObserver(this.buyButtonNodeChanged.bind(this)),this.startObservingBuyButtonAttributeChanges(),setTimeout(this.buyButtonNodeChanged.bind(this)),this.options.showDialogInsteadOfDisableButton&&(this.el.addEventListener("click",this.onBuyButtonClicked.bind(this)),this.el.disabled=!1);document.getElementById("productDetailPageBuyProductForm").addEventListener("keydown",(t=>{if("Enter"==t.code||"NumpadEnter"==t.code)return this.onBuyButtonClicked(t)}))}buyButtonNodeChanged(){this.isDisabled=this.isBuyButtonDisabled(),this.options.showDialogInsteadOfDisableButton||(this.stopObservingBuyButtonAttributeChanges(),this.el.disabled=this.isDisabled,this.startObservingBuyButtonAttributeChanges())}startObservingBuyButtonAttributeChanges(){this.buyButtonObserver.observe(this.el,{attributes:!0})}stopObservingBuyButtonAttributeChanges(){this.buyButtonObserver.disconnect()}isBuyButtonDisabled(){for(let t of this.el.attributes)if(t.name.endsWith("-buy-button-disabled"))return!0;return!1}onBuyButtonClicked(t){if(!this.isDisabled)return!0;const n=document.querySelector("#buy-button-state-synchronizer-modal");if(n){const e=[];for(const t in window.buyButtonStateSynchronizerActions){const i=window.buyButtonStateSynchronizerActions[t];if(null!=i.label){const t=document.createElement("button");t.classList.add("btn","btn-primary"),t.innerHTML=i.label,t.onclick=t=>{n.close(),i.callback(t)},e.push(t)}}if(0===e.length)for(const n in window.buyButtonStateSynchronizerActions){const e=window.buyButtonStateSynchronizerActions[n];if(null!=e.callback)return e.callback(),t.preventDefault(),!1}const i=document.createElement("button");i.classList.add("btn","btn-secondary"),i.innerHTML=n.getAttribute("data-cancel-btn-label"),i.onclick=()=>n.close(),e.push(i),document.getElementById("buy-button-state-synchronizer-modal-actions").replaceChildren(...e),n.showModal()}return t.preventDefault(),!1}}i=r,s={showDialogInsteadOfDisableButton:null},(o=function(t){var n=function(t,n){if("object"!=typeof t||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,n||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==typeof n?n:String(n)}(o="options"))in i?Object.defineProperty(i,o,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[o]=s;window.PluginManager.register("BuyButtonStateSynchronizer",r,"[data-buy-button-state-synchronizer]")}},t=>{t.O(0,["vendor-node","vendor-shared"],(()=>{return n=6844,t(t.s=n);var n}));t.O()}]);